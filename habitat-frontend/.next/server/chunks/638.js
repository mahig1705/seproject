exports.id=638,exports.ids=[638],exports.modules={7810:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},5682:(e,t,s)=>{Promise.resolve().then(s.bind(s,4669)),Promise.resolve().then(s.bind(s,5814))},5814:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AuthProvider:()=>h,useAuth:()=>u});var i=s(2295),r=s(3729),a=s(3490),n=s(8243),o=s(8014),d=s(4669);let c=(0,r.createContext)(void 0),u=()=>{let e=(0,r.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},h=({children:e})=>{let[t,s]=(0,r.useState)(null),[u,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{let e=o.Z.get("accessToken");if(e)try{let t=await fetch("http://localhost:5000/api/users/me",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){let e=await t.json();e.success?s(e.data):(o.Z.remove("accessToken"),o.Z.remove("refreshToken"))}else o.Z.remove("accessToken"),o.Z.remove("refreshToken")}catch(e){console.error("Auth init error:",e),o.Z.remove("accessToken"),o.Z.remove("refreshToken")}h(!1)})()},[]);let l=async(e,t)=>{try{let i=await n.E.login(e,t);if(console.log("Login response:",i),!i.success)return d.default.error(i.message||"Login failed"),!1;let{user:r,token:a}=i.data;return s(r),o.Z.set("accessToken",a,{expires:7}),d.default.success("Login successful!"),!0}catch(e){return console.error("Login error:",e),d.default.error(e.response?.data?.message||"Login failed"),!1}},p=async e=>{try{let t=await n.E.register(e);if(console.log("Register response:",t),!t.success)return d.default.error(t.message),!1;let{user:i,token:r}=t.data;return s(i),o.Z.set("accessToken",r,{expires:7}),d.default.success(t.message||"Registration successful!"),!0}catch(e){return console.error("Registration error:",e),d.default.error(e.response?.data?.message||"Registration failed"),!1}},g=async()=>{try{await n.E.logout()}catch(e){}finally{s(null),o.Z.remove("accessToken"),o.Z.remove("refreshToken"),d.default.success("Logged out successfully")}};return i.jsx(c.Provider,{value:{user:t,isLoading:u,login:l,register:p,logout:g,hasRole:e=>!!t&&e.includes(t.role),hasPermission:e=>{if(!t)return!1;let s={[a.i4.ADMIN]:["users:read","users:write","users:delete","bills:read","bills:write","bills:delete","notices:read","notices:write","notices:delete","amenities:read","amenities:write","amenities:delete","bookings:read","bookings:write","bookings:delete","issues:read","issues:write","issues:delete","tickets:read","tickets:write","tickets:delete","visitors:read","visitors:write","technicians:read","technicians:write","technicians:delete","payments:read"],[a.i4.COMMITTEE]:["users:read","users:write","bills:read","bills:write","notices:read","notices:write","notices:delete","amenities:read","amenities:write","amenities:delete","bookings:read","bookings:write","bookings:delete","issues:read","issues:write","issues:delete","tickets:read","tickets:write","tickets:delete","visitors:read","visitors:write","technicians:read","technicians:write","technicians:delete","payments:read"],[a.i4.RESIDENT]:["bills:read","bills:write","notices:read","amenities:read","bookings:read","bookings:write","issues:read","issues:write","visitors:read","visitors:write","payments:read"],[a.i4.TENANT]:["bills:read","bills:write","notices:read","amenities:read","bookings:read","bookings:write","issues:read","issues:write","visitors:read","visitors:write","payments:read"],[a.i4.SECURITY]:["notices:read","visitors:read","visitors:write"],[a.i4.TECHNICIAN]:["notices:read","tickets:read","tickets:write"]};return s[t.role]?.includes(e)||!1}},children:e})}},8243:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var i=s(1934),r=s(8014);class a{constructor(){this.api=i.Z.create({baseURL:"http://localhost:5000/api",timeout:1e4}),this.api.interceptors.request.use(e=>{let t=r.Z.get("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),this.api.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e.response?.status===401&&!t._retry){t._retry=!0;try{let e=r.Z.get("refreshToken");if(!e)throw Error("No refresh token found");let{accessToken:s}=(await i.Z.post(`${this.api.defaults.baseURL}/auth/refresh`,{refreshToken:e})).data.data;return r.Z.set("accessToken",s,{expires:7}),t.headers.Authorization=`Bearer ${s}`,this.api(t)}catch{r.Z.remove("accessToken"),r.Z.remove("refreshToken"),window.location.href="/login"}}return Promise.reject(e)})}login(e,t){return this.api.post("/auth/login",{email:e,password:t}).then(e=>e.data)}register(e){return this.api.post("/auth/register",e).then(e=>e.data)}logout(){let e=r.Z.get("refreshToken");return e&&this.api.post("/auth/logout",{refreshToken:e}),r.Z.remove("accessToken"),r.Z.remove("refreshToken"),Promise.resolve()}createUser(e){return this.api.post("/users",e).then(e=>e.data)}getUsers(){return this.api.get("/users").then(e=>e.data)}getUserById(e){return this.api.get(`/users/${e}`).then(e=>e.data)}updateUser(e,t){return this.api.put(`/users/${e}`,t).then(e=>e.data)}deleteUser(e){return this.api.delete(`/users/${e}`).then(e=>e.data)}getIssues(e){return this.api.get("/issues",{params:e}).then(e=>e.data.data)}getIssueById(e){return this.api.get(`/issues/${e}`).then(e=>e.data.data)}createIssue(e){return this.api.post("/issues",e).then(e=>e.data.data)}updateIssue(e,t){return this.api.patch(`/issues/${e}`,t).then(e=>e.data.data)}deleteIssue(e){return this.api.delete(`/issues/${e}`).then(e=>e.data)}getNotices(e){return this.api.get("/notices",{params:e}).then(e=>e.data)}getNoticeById(e){return this.api.get(`/notices/${e}`).then(e=>e.data)}createNotice(e){return this.api.post("/notices",e).then(e=>e.data)}updateNotice(e,t){return this.api.patch(`/notices/${e}`,t).then(e=>e.data)}deleteNotice(e){return this.api.delete(`/notices/${e}`).then(e=>e.data)}getBills(e){return this.api.get("/bills",{params:e}).then(e=>e.data.data)}getBillById(e){return this.api.get(`/bills/${e}`).then(e=>e.data.data)}createBill(e){return this.api.post("/bills",e).then(e=>e.data)}updateBill(e,t){return this.api.put(`/bills/${e}`,t).then(e=>e.data)}deleteBill(e){return this.api.delete(`/bills/${e}`).then(e=>e.data)}payBill(e,t,s){return this.api.patch(`/bills/${e}/pay`,{amount:t,gatewayRef:s}).then(e=>e.data)}generateBills(e){return this.api.post("/bills/generate",e).then(e=>e.data)}async getPayments(e){try{return(await this.api.get("/payments",{params:e})).data}catch(e){throw console.error("Failed to fetch payments:",e),e}}getAmenities(){return this.api.get("/amenities").then(e=>e.data)}createAmenity(e){return this.api.post("/amenities",e).then(e=>e.data)}updateAmenity(e,t){return this.api.put(`/amenities/${e}`,t).then(e=>e.data)}deleteAmenity(e){return this.api.delete(`/amenities/${e}`).then(e=>e.data)}getBookings(e){return this.api.get("/bookings",{params:e}).then(e=>e.data.data)}createBooking(e){return this.api.post("/bookings",e).then(e=>e.data)}updateBooking(e,t){return this.api.put(`/bookings/${e}`,t).then(e=>e.data)}approveBooking(e,t){return this.api.patch(`/bookings/${e}/approve`,{status:t}).then(e=>e.data)}updateBookingStatus(e,t){return this.api.patch(`/bookings/${e}/`,{status:t}).then(e=>e.data)}getVisitors(e){return this.api.get("/visitors",{params:e}).then(e=>e.data.data)}createVisitor(e){return this.api.post("/visitors",e).then(e=>e.data.data)}checkoutVisitor(e){return this.api.patch(`/visitors/${e}/checkout`).then(e=>e.data.data)}getTechnicians(){return this.api.get("/technicians").then(e=>e.data.data)}createTechnician(e){return this.api.post("/technicians",e).then(e=>e.data.data)}updateTechnician(e,t){return this.api.put(`/technicians/${e}`,t).then(e=>e.data)}deleteTechnician(e){return this.api.delete(`/technicians/${e}`).then(e=>e.data)}}let n=new a},3490:(e,t,s)=>{"use strict";var i,r,a,n,o,d;s.d(t,{bG:()=>d,d$:()=>a,gn:()=>o,i4:()=>i}),function(e){e.ADMIN="admin",e.COMMITTEE="committee",e.RESIDENT="resident",e.TENANT="tenant",e.SECURITY="security",e.TECHNICIAN="technician"}(i||(i={})),function(e){e.MALE="male",e.FEMALE="female",e.OTHER="other"}(r||(r={})),function(e){e.OPEN="open",e.IN_PROGRESS="in_progress",e.RESOLVED="resolved",e.CLOSED="closed"}(a||(a={})),function(e){e.PENDING="pending",e.ASSIGNED="assigned",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.CANCELLED="cancelled"}(n||(n={})),function(e){e.PENDING="pending",e.APPROVED="approved",e.REJECTED="rejected",e.CANCELLED="cancelled"}(o||(o={})),function(e){e.PENDING="Pending",e.COMPLETED="Completed",e.FAILED="Failed",e.REFUNDED="Refunded"}(d||(d={}))},6313:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p,metadata:()=>l});var i=s(5036),r=s(3640),a=s.n(r);s(5023);var n=s(6843);let o=(0,n.createProxy)(String.raw`C:\Users\Mahi\Downloads\Habitat\habitat-frontend\src\contexts\AuthContext.tsx`),{__esModule:d,$$typeof:c}=o;o.default,(0,n.createProxy)(String.raw`C:\Users\Mahi\Downloads\Habitat\habitat-frontend\src\contexts\AuthContext.tsx#useAuth`);let u=(0,n.createProxy)(String.raw`C:\Users\Mahi\Downloads\Habitat\habitat-frontend\src\contexts\AuthContext.tsx#AuthProvider`);var h=s(9636);let l={title:"Habitat Society Management",description:"Complete society management system"};function p({children:e}){return i.jsx("html",{lang:"en",children:i.jsx("body",{className:a().className,children:(0,i.jsxs)(u,{children:[e,i.jsx(h.x7,{position:"top-right"})]})})})}},5023:()=>{}};