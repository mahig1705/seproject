(()=>{var e={};e.id=240,e.ids=[240],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3198:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var t=r(482),a=r(9108),l=r(2563),n=r.n(l),i=r(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(s,o);let c=["",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4074)),"C:\\Users\\Mahi\\Downloads\\Habitat\\habitat-frontend\\src\\app\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,6313)),"C:\\Users\\Mahi\\Downloads\\Habitat\\habitat-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Mahi\\Downloads\\Habitat\\habitat-frontend\\src\\app\\users\\page.tsx"],u="/users/page",x={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},54:(e,s,r)=>{Promise.resolve().then(r.bind(r,6193))},5695:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(9224).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},1838:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(9224).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8271:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(9224).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6193:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>f});var t=r(2295),a=r(3729),l=r(5814),n=r(951),i=r(9956),o=r(4034),c=r(342),d=r(8649),u=r(793),x=r(2522),m=r(9865),h=r(1838),p=r(5695),j=r(8271),g=r(4669),v=r(8243),b=r(3490);function f(){let{hasPermission:e}=(0,l.useAuth)(),[s,r]=(0,a.useState)([]),[f,y]=(0,a.useState)(!0),[N,w]=(0,a.useState)(""),[C,E]=(0,a.useState)(""),[q,P]=(0,a.useState)(!1),[k,S]=(0,a.useState)(!1),[D,M]=(0,a.useState)(null),[I,A]=(0,a.useState)({name:"",email:"",phone:"",role:b.i4.RESIDENT,flatNumber:"",password:""}),U=[{value:b.i4.ADMIN,label:"Admin"},{value:b.i4.COMMITTEE,label:"Committee"},{value:b.i4.RESIDENT,label:"Resident"},{value:b.i4.TENANT,label:"Tenant"},{value:b.i4.SECURITY,label:"Security"},{value:b.i4.TECHNICIAN,label:"Technician"}];(0,a.useEffect)(()=>{e("users:read")&&_()},[]);let _=async()=>{y(!0),console.log("\uD83D\uDD0D Fetching users...");try{let e=await v.E.getUsers();console.log("✅ API response:",e),e?.data?(r(e.data),console.log("\uD83D\uDC65 Users loaded:",e.data.length)):console.warn("⚠️ Unexpected users response format:",e)}catch(e){console.error("❌ Failed to load users:",e?.response?.data||e.message)}finally{y(!1),console.log("⏹️ Fetch users completed")}},T=()=>{A({name:"",email:"",phone:"",role:b.i4.RESIDENT,flatNumber:"",password:""})},R=()=>!I.name.trim()||I.name.length<2?(g.default.error("Name must be at least 2 characters"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I.email)?I.phone&&!/^\d{10}$/.test(I.phone)?(g.default.error("Phone number must be 10 digits"),!1):I.role?!q||!!I.password.trim()||(g.default.error("Password is required for new users"),!1):(g.default.error("Please select a role"),!1):(g.default.error("Enter a valid email address"),!1),Z=async e=>{if(e.preventDefault(),R()){console.log("\uD83D\uDE80 Sending user create request with data:",I);try{let e=await v.E.createUser(I);console.log("✅ Create user response:",e),g.default.success("User created successfully"),P(!1),T(),_()}catch(e){console.error("❌ Failed to create user:",e?.response?.data||e),g.default.error("Failed to create user")}}},F=async e=>{if(e.preventDefault(),R())try{await v.E.updateUser(D?._id,I),g.default.success("User updated successfully"),S(!1),M(null),T(),_()}catch{g.default.error("Failed to update user")}},z=async e=>{if(confirm("Delete this user permanently?"))try{await v.E.deleteUser(e),g.default.success("User deleted"),_()}catch{g.default.error("Failed to delete user")}},H=e=>{M(e),A({name:e.name,email:e.email,phone:e.phone||"",role:e.role,flatNumber:e.flatNumber||"",password:""}),S(!0)},L=s.filter(e=>{let s=e.name.toLowerCase().includes(N.toLowerCase())||e.email.toLowerCase().includes(N.toLowerCase()),r=!C||e.role===C;return s&&r}),O=e=>{switch(e){case b.i4.ADMIN:return"danger";case b.i4.COMMITTEE:return"info";case b.i4.RESIDENT:return"success";case b.i4.TENANT:return"warning";default:return"default"}};return(0,t.jsxs)(n.A,{children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Users"}),e("users:write")&&(0,t.jsxs)(o.z,{onClick:()=>P(!0),children:[t.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Add User"]})]}),t.jsx(i.Zb,{children:(0,t.jsxs)(i.aY,{className:"p-4 grid md:grid-cols-3 gap-4",children:[t.jsx(c.I,{placeholder:"Search users...",value:N,onChange:e=>w(e.target.value)}),t.jsx(d.P,{value:C,onChange:e=>E(e.target.value),options:[{value:"",label:"All Roles"},...U]})]})}),(0,t.jsxs)(i.Zb,{children:[t.jsx(i.Ol,{children:(0,t.jsxs)(i.ll,{children:["All Users (",L.length,")"]})}),t.jsx(i.aY,{children:f?t.jsx("div",{className:"text-center py-8",children:t.jsx("div",{className:"h-8 w-8 border-2 border-primary-500 rounded-full border-t-transparent animate-spin mx-auto"})}):(0,t.jsxs)(m.iA,{children:[t.jsx(m.xD,{children:(0,t.jsxs)(m.SC,{children:[t.jsx(m.ss,{children:"Name"}),t.jsx(m.ss,{children:"Email"}),t.jsx(m.ss,{children:"Phone"}),t.jsx(m.ss,{children:"Role"}),t.jsx(m.ss,{children:"Flat"}),t.jsx(m.ss,{children:"Status"}),t.jsx(m.ss,{children:"Actions"})]})}),t.jsx(m.RM,{children:L.map(e=>(0,t.jsxs)(m.SC,{children:[t.jsx(m.pj,{children:e.name}),t.jsx(m.pj,{children:e.email}),t.jsx(m.pj,{children:e.phone||"-"}),t.jsx(m.pj,{children:t.jsx(u.C,{variant:O(e.role),children:e.role})}),t.jsx(m.pj,{children:e.flatNumber||"-"}),t.jsx(m.pj,{children:t.jsx(u.C,{variant:e.isActive?"success":"danger",children:e.isActive?"Active":"Inactive"})}),t.jsx(m.pj,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(o.z,{size:"sm",variant:"outline",onClick:()=>H(e),children:t.jsx(p.Z,{className:"w-4 h-4"})}),t.jsx(o.z,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>z(e._id),children:t.jsx(j.Z,{className:"w-4 h-4"})})]})})]},e._id))})]})})]})]}),t.jsx(x.u,{isOpen:q,onClose:()=>P(!1),title:"Add User",children:(0,t.jsxs)("form",{onSubmit:Z,className:"space-y-4",children:[t.jsx(c.I,{label:"Name",value:I.name,onChange:e=>A({...I,name:e.target.value}),required:!0}),t.jsx(c.I,{label:"Email",type:"email",value:I.email,onChange:e=>A({...I,email:e.target.value}),required:!0}),t.jsx(c.I,{label:"Password",type:"password",value:I.password,onChange:e=>A({...I,password:e.target.value}),required:!0}),t.jsx(c.I,{label:"Phone",value:I.phone,onChange:e=>A({...I,phone:e.target.value})}),t.jsx(d.P,{label:"Role",value:I.role,onChange:e=>A({...I,role:e.target.value}),options:U}),t.jsx(c.I,{label:"Flat Number",value:I.flatNumber,onChange:e=>A({...I,flatNumber:e.target.value})}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[t.jsx(o.z,{variant:"outline",type:"button",onClick:()=>P(!1),children:"Cancel"}),t.jsx(o.z,{type:"submit",children:"Save"})]})]})}),t.jsx(x.u,{isOpen:k,onClose:()=>S(!1),title:"Edit User",children:(0,t.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[t.jsx(c.I,{label:"Name",value:I.name,onChange:e=>A({...I,name:e.target.value}),required:!0}),t.jsx(c.I,{label:"Email",type:"email",value:I.email,onChange:e=>A({...I,email:e.target.value}),required:!0}),t.jsx(c.I,{label:"Phone",value:I.phone,onChange:e=>A({...I,phone:e.target.value})}),t.jsx(d.P,{label:"Role",value:I.role,onChange:e=>A({...I,role:e.target.value}),options:U}),t.jsx(c.I,{label:"Flat Number",value:I.flatNumber,onChange:e=>A({...I,flatNumber:e.target.value})}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[t.jsx(o.z,{variant:"outline",type:"button",onClick:()=>S(!1),children:"Cancel"}),t.jsx(o.z,{type:"submit",children:"Update"})]})]})})]})}},342:(e,s,r)=>{"use strict";r.d(s,{I:()=>l});var t=r(2295);r(3729);var a=r(1453);let l=({label:e,error:s,helperText:r,className:l,id:n,...i})=>{let o=n||`input-${Math.random().toString(36).substr(2,9)}`;return(0,t.jsxs)("div",{className:"space-y-2",children:[e&&t.jsx("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:e}),t.jsx("input",{id:o,className:(0,a.cn)("w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",s&&"border-red-500 focus:ring-red-500",l),...i}),s&&t.jsx("p",{className:"text-sm text-red-600",children:s}),r&&!s&&t.jsx("p",{className:"text-sm text-gray-500",children:r})]})}},2522:(e,s,r)=>{"use strict";r.d(s,{u:()=>i});var t=r(2295),a=r(3729),l=r(1453),n=r(4513);let i=({isOpen:e,onClose:s,title:r,children:i,size:o="md"})=>((0,a.useEffect)(()=>{let r=e=>{"Escape"===e.key&&s()};return e&&(document.addEventListener("keydown",r),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",r),document.body.style.overflow="unset"}},[e,s]),e)?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),(0,t.jsxs)("div",{className:(0,l.cn)("relative bg-white rounded-lg shadow-xl w-full",{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[o]),children:[r&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(n.Z,{className:"h-5 w-5"})})]}),t.jsx("div",{className:"p-6",children:i})]})]})}):null},8649:(e,s,r)=>{"use strict";r.d(s,{P:()=>l});var t=r(2295);r(3729);var a=r(1453);let l=({label:e,error:s,helperText:r,options:l,className:n,id:i,...o})=>{let c=i||`select-${Math.random().toString(36).substr(2,9)}`;return(0,t.jsxs)("div",{className:"space-y-2",children:[e&&t.jsx("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700",children:e}),t.jsx("select",{id:c,className:(0,a.cn)("w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",s&&"border-red-500 focus:ring-red-500",n),...o,children:l.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))}),s&&t.jsx("p",{className:"text-sm text-red-600",children:s}),r&&!s&&t.jsx("p",{className:"text-sm text-gray-500",children:r})]})}},9865:(e,s,r)=>{"use strict";r.d(s,{RM:()=>i,SC:()=>o,iA:()=>l,pj:()=>d,ss:()=>c,xD:()=>n});var t=r(2295);r(3729);var a=r(1453);let l=({children:e,className:s,...r})=>t.jsx("div",{className:"overflow-x-auto",children:t.jsx("table",{className:(0,a.cn)("w-full border-collapse",s),...r,children:e})}),n=({children:e,className:s,...r})=>t.jsx("thead",{className:(0,a.cn)("bg-gray-50",s),...r,children:e}),i=({children:e,className:s,...r})=>t.jsx("tbody",{className:(0,a.cn)("bg-white divide-y divide-gray-200",s),...r,children:e}),o=({children:e,className:s,...r})=>t.jsx("tr",{className:(0,a.cn)("hover:bg-gray-50 transition-colors",s),...r,children:e}),c=({children:e,className:s,...r})=>t.jsx("th",{className:(0,a.cn)("px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",s),...r,children:e}),d=({children:e,className:s,...r})=>t.jsx("td",{className:(0,a.cn)("px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b border-gray-200",s),...r,children:e})},4074:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>n});let t=(0,r(6843).createProxy)(String.raw`C:\Users\Mahi\Downloads\Habitat\habitat-frontend\src\app\users\page.tsx`),{__esModule:a,$$typeof:l}=t,n=t.default}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[550,694,783,638,328],()=>r(3198));module.exports=t})();