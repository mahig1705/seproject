(()=>{var e={};e.id=521,e.ids=[521],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},887:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>p,tree:()=>d});var r=t(482),a=t(9108),i=t(2563),l=t.n(i),n=t(8300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["issues",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5360)),"C:\\Users\\Mahi\\Downloads\\Habitat\\habitat-frontend\\src\\app\\issues\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6313)),"C:\\Users\\Mahi\\Downloads\\Habitat\\habitat-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\Mahi\\Downloads\\Habitat\\habitat-frontend\\src\\app\\issues\\page.tsx"],u="/issues/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/issues/page",pathname:"/issues",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7323:(e,s,t)=>{Promise.resolve().then(t.bind(t,3076))},5695:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(9224).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},1838:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(9224).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8765:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(9224).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3076:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var r=t(2295),a=t(3729),i=t(5814),l=t(951),n=t(9956),c=t(4034),d=t(342),o=t(8649),u=t(4388),x=t(793),p=t(2522),h=t(9865),m=t(3490),g=t(8243),j=t(1838),v=t(8765),y=t(5961),b=t(5695),f=t(1453),N=t(4669);function w(){let{hasPermission:e}=(0,i.useAuth)(),[s,t]=(0,a.useState)([]),[w,C]=(0,a.useState)(!0),[S,q]=(0,a.useState)(""),[P,E]=(0,a.useState)(""),[_,k]=(0,a.useState)(!1),[I,D]=(0,a.useState)(!1),[A,M]=(0,a.useState)(null),[O,$]=(0,a.useState)([]),[R,Z]=(0,a.useState)({title:"",description:"",status:m.d$.OPEN,images:[],technician:""}),z=[{value:"",label:"All Status"},{value:m.d$.OPEN,label:"Open"},{value:m.d$.IN_PROGRESS,label:"In Progress"},{value:m.d$.RESOLVED,label:"Resolved"},{value:m.d$.CLOSED,label:"Closed"}];(0,a.useEffect)(()=>{e("issues:read")&&(L(),U())},[]);let L=async()=>{try{C(!0);let e=await g.E.getIssues();t(e)}catch(e){N.default.error("Failed to fetch issues")}finally{C(!1)}},U=async()=>{try{let e=await g.E.getTechnicians();$(e)}catch(e){console.error("Failed to fetch technicians")}},T=async e=>{e.preventDefault();try{await g.E.createIssue({title:R.title,description:R.description,images:R.images,technician:R.technician}),N.default.success("Issue created successfully"),k(!1),G(),L()}catch(e){N.default.error("Failed to create issue")}},F=async e=>{if(e.preventDefault(),A)try{await g.E.updateIssue(A._id,{...R,technician:R.technician}),N.default.success("Issue updated successfully"),D(!1),M(null),G(),L()}catch(e){N.default.error("Failed to update issue")}},G=()=>{Z({title:"",description:"",status:m.d$.OPEN,images:[],technician:""})},H=e=>{M(e),Z({title:e.title,description:e.description,status:e.status,images:e.images||[],technician:e.technician?._id||""}),D(!0)},Y=(s||[]).filter(e=>{let s=e.title.toLowerCase().includes(S.toLowerCase())||e.description.toLowerCase().includes(S.toLowerCase()),t=!P||e.status===P,r=e.status!==m.d$.CLOSED;return s&&t&&r}),V=e=>{switch(e){case m.d$.OPEN:return"warning";case m.d$.IN_PROGRESS:return"info";case m.d$.RESOLVED:return"success";case m.d$.CLOSED:default:return"default"}};return e("issues:read")?(0,r.jsxs)(l.A,{children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Issues"}),e("issues:write")&&(0,r.jsxs)(c.z,{onClick:()=>k(!0),children:[r.jsx(j.Z,{className:"w-4 h-4 mr-2"})," Report Issue"]})]}),r.jsx(n.Zb,{children:r.jsx(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(d.I,{placeholder:"Search issues...",value:S,onChange:e=>q(e.target.value)}),r.jsx(v.Z,{className:"w-4 h-4 absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),r.jsx(o.P,{value:P,onChange:e=>E(e.target.value),options:z})]})})}),(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:(0,r.jsxs)(n.ll,{children:["All Issues (",Y.length,")"]})}),r.jsx(n.aY,{children:w?r.jsx("div",{className:"text-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"})}):(0,r.jsxs)(h.iA,{children:[r.jsx(h.xD,{children:(0,r.jsxs)(h.SC,{children:[r.jsx(h.ss,{children:"Title"}),r.jsx(h.ss,{children:"Description"}),r.jsx(h.ss,{children:"Reporter"}),r.jsx(h.ss,{children:"Assigned To"}),r.jsx(h.ss,{children:"Status"}),r.jsx(h.ss,{children:"Created"}),r.jsx(h.ss,{children:"Actions"})]})}),r.jsx(h.RM,{children:Y.map(e=>(0,r.jsxs)(h.SC,{children:[r.jsx(h.pj,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(y.Z,{className:"w-5 h-5 text-orange-500"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:e.title}),e.images&&e.images.length>0&&(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e.images.length," image(s)"]})]})]})}),r.jsx(h.pj,{children:r.jsx("p",{className:"text-sm text-gray-600 max-w-xs truncate",children:e.description})}),r.jsx(h.pj,{children:r.jsx("span",{className:"text-sm text-gray-900",children:e.reporter?.name||"Unassigned"})}),r.jsx(h.pj,{children:r.jsx("span",{className:"text-sm text-gray-900",children:e.technician?.name||"Unassigned"})}),r.jsx(h.pj,{children:r.jsx(x.C,{variant:V(e.status),children:e.status.replace("_"," ")})}),r.jsx(h.pj,{children:r.jsx("span",{className:"text-sm text-gray-600",children:(0,f.p6)(e.createdAt)})}),r.jsx(h.pj,{children:r.jsx(c.z,{variant:"outline",size:"sm",onClick:()=>H(e),children:r.jsx(b.Z,{className:"w-4 h-4"})})})]},e._id))})]})})]})]}),r.jsx(p.u,{isOpen:_,onClose:()=>k(!1),title:"Report New Issue",size:"lg",children:(0,r.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[r.jsx(d.I,{label:"Title",value:R.title,onChange:e=>Z(s=>({...s,title:e.target.value})),placeholder:"Brief description of the issue",required:!0}),r.jsx(u.g,{label:"Description",value:R.description,onChange:e=>Z(s=>({...s,description:e.target.value})),placeholder:"Detailed description of the issue",rows:4,required:!0}),r.jsx(o.P,{label:"Assign To",value:R.technician,onChange:e=>Z(s=>({...s,technician:e.target.value})),options:[{value:"",label:"Unassigned"},...(O||[]).map(e=>({value:e._id,label:e.name}))]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[r.jsx(c.z,{type:"button",variant:"outline",onClick:()=>k(!1),children:"Cancel"}),r.jsx(c.z,{type:"submit",children:"Report Issue"})]})]})}),r.jsx(p.u,{isOpen:I,onClose:()=>D(!1),title:"Edit Issue",size:"lg",children:(0,r.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[r.jsx(d.I,{label:"Title",value:R.title,onChange:e=>Z(s=>({...s,title:e.target.value})),required:!0}),r.jsx(u.g,{label:"Description",value:R.description,onChange:e=>Z(s=>({...s,description:e.target.value})),rows:4,required:!0}),r.jsx(o.P,{label:"Assign To",value:R.technician,onChange:e=>Z(s=>({...s,technician:e.target.value})),options:[{value:"",label:"Unassigned"},...(O||[]).map(e=>({value:e._id,label:e.name}))]}),r.jsx(o.P,{label:"Status",value:R.status,onChange:e=>Z(s=>({...s,status:e.target.value})),options:z.filter(e=>""!==e.value)}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[r.jsx(c.z,{type:"button",variant:"outline",onClick:()=>D(!1),children:"Cancel"}),r.jsx(c.z,{type:"submit",children:"Update Issue"})]})]})})]}):r.jsx(l.A,{children:(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),r.jsx("p",{className:"text-gray-600",children:"You don't have permission to view this page."})]})})}},342:(e,s,t)=>{"use strict";t.d(s,{I:()=>i});var r=t(2295);t(3729);var a=t(1453);let i=({label:e,error:s,helperText:t,className:i,id:l,...n})=>{let c=l||`input-${Math.random().toString(36).substr(2,9)}`;return(0,r.jsxs)("div",{className:"space-y-2",children:[e&&r.jsx("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700",children:e}),r.jsx("input",{id:c,className:(0,a.cn)("w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",s&&"border-red-500 focus:ring-red-500",i),...n}),s&&r.jsx("p",{className:"text-sm text-red-600",children:s}),t&&!s&&r.jsx("p",{className:"text-sm text-gray-500",children:t})]})}},2522:(e,s,t)=>{"use strict";t.d(s,{u:()=>n});var r=t(2295),a=t(3729),i=t(1453),l=t(4513);let n=({isOpen:e,onClose:s,title:t,children:n,size:c="md"})=>((0,a.useEffect)(()=>{let t=e=>{"Escape"===e.key&&s()};return e&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="unset"}},[e,s]),e)?r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),(0,r.jsxs)("div",{className:(0,i.cn)("relative bg-white rounded-lg shadow-xl w-full",{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[c]),children:[t&&(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),r.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(l.Z,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"p-6",children:n})]})]})}):null},8649:(e,s,t)=>{"use strict";t.d(s,{P:()=>i});var r=t(2295);t(3729);var a=t(1453);let i=({label:e,error:s,helperText:t,options:i,className:l,id:n,...c})=>{let d=n||`select-${Math.random().toString(36).substr(2,9)}`;return(0,r.jsxs)("div",{className:"space-y-2",children:[e&&r.jsx("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700",children:e}),r.jsx("select",{id:d,className:(0,a.cn)("w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",s&&"border-red-500 focus:ring-red-500",l),...c,children:i.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))}),s&&r.jsx("p",{className:"text-sm text-red-600",children:s}),t&&!s&&r.jsx("p",{className:"text-sm text-gray-500",children:t})]})}},9865:(e,s,t)=>{"use strict";t.d(s,{RM:()=>n,SC:()=>c,iA:()=>i,pj:()=>o,ss:()=>d,xD:()=>l});var r=t(2295);t(3729);var a=t(1453);let i=({children:e,className:s,...t})=>r.jsx("div",{className:"overflow-x-auto",children:r.jsx("table",{className:(0,a.cn)("w-full border-collapse",s),...t,children:e})}),l=({children:e,className:s,...t})=>r.jsx("thead",{className:(0,a.cn)("bg-gray-50",s),...t,children:e}),n=({children:e,className:s,...t})=>r.jsx("tbody",{className:(0,a.cn)("bg-white divide-y divide-gray-200",s),...t,children:e}),c=({children:e,className:s,...t})=>r.jsx("tr",{className:(0,a.cn)("hover:bg-gray-50 transition-colors",s),...t,children:e}),d=({children:e,className:s,...t})=>r.jsx("th",{className:(0,a.cn)("px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",s),...t,children:e}),o=({children:e,className:s,...t})=>r.jsx("td",{className:(0,a.cn)("px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b border-gray-200",s),...t,children:e})},4388:(e,s,t)=>{"use strict";t.d(s,{g:()=>i});var r=t(2295);t(3729);var a=t(1453);let i=({label:e,error:s,helperText:t,className:i,id:l,...n})=>{let c=l||`textarea-${Math.random().toString(36).substr(2,9)}`;return(0,r.jsxs)("div",{className:"space-y-2",children:[e&&r.jsx("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700",children:e}),r.jsx("textarea",{id:c,className:(0,a.cn)("w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-vertical",s&&"border-red-500 focus:ring-red-500",i),...n}),s&&r.jsx("p",{className:"text-sm text-red-600",children:s}),t&&!s&&r.jsx("p",{className:"text-sm text-gray-500",children:t})]})}},5360:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let r=(0,t(6843).createProxy)(String.raw`C:\Users\Mahi\Downloads\Habitat\habitat-frontend\src\app\issues\page.tsx`),{__esModule:a,$$typeof:i}=r,l=r.default}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[550,694,783,638,328],()=>t(887));module.exports=r})();