(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74],{3008:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6141:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(2898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1298:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(2898).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},5817:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(2898).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},1827:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(2898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2104:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(2898).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1070:function(e,s,t){Promise.resolve().then(t.bind(t,225))},225:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Z}});var r=t(7437),a=t(2265),l=t(3779),n=t(3414),c=t(7418),i=t(6651),d=t(2278),x=t(9173),u=t(8584),o=t(200),m=t(4494),h=t(1633),j=t(6141),p=t(3008),f=t(2104),y=t(1738),N=t(1298),b=t(5817),g=t(1827),v=t(2169),w=t(5925);function Z(){let{hasPermission:e}=(0,l.useAuth)(),[s,t]=(0,a.useState)([]),[Z,E]=(0,a.useState)(!0),[C,k]=(0,a.useState)(""),[D,G]=(0,a.useState)(""),A=[{value:"",label:"All Status"},{value:m.bG.PENDING,label:"Pending"},{value:m.bG.COMPLETED,label:"Completed"},{value:m.bG.FAILED,label:"Failed"},{value:m.bG.REFUNDED,label:"Refunded"}];(0,a.useEffect)(()=>{e("payments:read")&&P()},[]);let P=async()=>{try{E(!0);let e=await h.E.getPayments();t(e.data)}catch(e){w.default.error("Failed to fetch payments")}finally{E(!1)}},L=(s||[]).filter(e=>{let s=e.bill.description.toLowerCase().includes(C.toLowerCase())||e.bill.user.name.toLowerCase().includes(C.toLowerCase())||e.gatewayRef.toLowerCase().includes(C.toLowerCase()),t=!D||e.status===D;return s&&t}),S=e=>{switch(e){case m.bG.PENDING:return"warning";case m.bG.COMPLETED:return"success";case m.bG.FAILED:return"danger";case m.bG.REFUNDED:return"info";default:return"default"}},M=e=>{switch(e){case m.bG.PENDING:return(0,r.jsx)(j.Z,{className:"w-4 h-4"});case m.bG.COMPLETED:return(0,r.jsx)(p.Z,{className:"w-4 h-4"});case m.bG.FAILED:return(0,r.jsx)(f.Z,{className:"w-4 h-4"});case m.bG.REFUNDED:return(0,r.jsx)(y.Z,{className:"w-4 h-4"});default:return(0,r.jsx)(N.Z,{className:"w-4 h-4"})}};if(!e("payments:read"))return(0,r.jsx)(n.A,{children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600",children:"You don't have permission to view this page."})]})});let F=(()=>{let e=s.length;return{totalPayments:e,completedPayments:s.filter(e=>e.status===m.bG.COMPLETED).length,totalAmount:s.reduce((e,s)=>e+s.amount,0),completedAmount:s.filter(e=>e.status===m.bG.COMPLETED).reduce((e,s)=>e+s.amount,0)}})();return(0,r.jsx)(n.A,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Payments"}),(0,r.jsxs)(i.z,{variant:"outline",children:[(0,r.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Export"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsx)(c.Zb,{children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Payments"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:F.totalPayments})]}),(0,r.jsx)(y.Z,{className:"w-8 h-8 text-blue-600"})]})})}),(0,r.jsx)(c.Zb,{children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:F.completedPayments})]}),(0,r.jsx)(p.Z,{className:"w-8 h-8 text-green-600"})]})})}),(0,r.jsx)(c.Zb,{children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(0,v.xG)(F.totalAmount)})]}),(0,r.jsx)(N.Z,{className:"w-8 h-8 text-green-600"})]})})}),(0,r.jsx)(c.Zb,{children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed Amount"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(0,v.xG)(F.completedAmount)})]}),(0,r.jsx)(p.Z,{className:"w-8 h-8 text-green-600"})]})})})]}),(0,r.jsx)(c.Zb,{children:(0,r.jsx)(c.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(g.Z,{className:"w-4 h-4 text-gray-400"}),(0,r.jsx)(d.I,{placeholder:"Search payments...",value:C,onChange:e=>k(e.target.value)})]}),(0,r.jsx)(x.P,{value:D,onChange:e=>G(e.target.value),options:A})]})})}),(0,r.jsxs)(c.Zb,{children:[(0,r.jsx)(c.Ol,{children:(0,r.jsxs)(c.ll,{children:["All Payments (",L.length,")"]})}),(0,r.jsx)(c.aY,{children:Z?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"})}):(0,r.jsxs)(o.iA,{children:[(0,r.jsx)(o.xD,{children:(0,r.jsxs)(o.SC,{children:[(0,r.jsx)(o.ss,{children:"User"}),(0,r.jsx)(o.ss,{children:"Bill Description"}),(0,r.jsx)(o.ss,{children:"Amount"}),(0,r.jsx)(o.ss,{children:"Gateway Ref"}),(0,r.jsx)(o.ss,{children:"Status"}),(0,r.jsx)(o.ss,{children:"Date"})]})}),(0,r.jsx)(o.RM,{children:L.map(e=>(0,r.jsxs)(o.SC,{children:[(0,r.jsx)(o.pj,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm font-medium text-primary-700",children:e.bill.user.name.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e.bill.user.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.bill.user.flatNumber})]})]})}),(0,r.jsx)(o.pj,{children:(0,r.jsx)("p",{className:"text-sm text-gray-900",children:e.bill.description})}),(0,r.jsx)(o.pj,{children:(0,r.jsx)("p",{className:"font-medium text-gray-900",children:(0,v.xG)(e.amount)})}),(0,r.jsx)(o.pj,{children:(0,r.jsx)("p",{className:"text-sm text-gray-600 font-mono",children:e.gatewayRef})}),(0,r.jsx)(o.pj,{children:(0,r.jsx)(u.C,{variant:S(e.status),children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[M(e.status),(0,r.jsx)("span",{children:e.status})]})})}),(0,r.jsx)(o.pj,{children:(0,r.jsx)("span",{className:"text-sm text-gray-600",children:(0,v.o0)(e.createdAt)})})]},e._id))})]})})]}),0===L.length&&!Z&&(0,r.jsx)(c.Zb,{children:(0,r.jsxs)(c.aY,{className:"p-12 text-center",children:[(0,r.jsx)(y.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No payments found"}),(0,r.jsx)("p",{className:"text-gray-600",children:"No payments match your search criteria."})]})})]})})}},2278:function(e,s,t){"use strict";t.d(s,{I:function(){return l}});var r=t(7437);t(2265);var a=t(2169);let l=e=>{let{label:s,error:t,helperText:l,className:n,id:c,...i}=e,d=c||"input-".concat(Math.random().toString(36).substr(2,9));return(0,r.jsxs)("div",{className:"space-y-2",children:[s&&(0,r.jsx)("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700",children:s}),(0,r.jsx)("input",{id:d,className:(0,a.cn)("w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",t&&"border-red-500 focus:ring-red-500",n),...i}),t&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:t}),l&&!t&&(0,r.jsx)("p",{className:"text-sm text-gray-500",children:l})]})}},9173:function(e,s,t){"use strict";t.d(s,{P:function(){return l}});var r=t(7437);t(2265);var a=t(2169);let l=e=>{let{label:s,error:t,helperText:l,options:n,className:c,id:i,...d}=e,x=i||"select-".concat(Math.random().toString(36).substr(2,9));return(0,r.jsxs)("div",{className:"space-y-2",children:[s&&(0,r.jsx)("label",{htmlFor:x,className:"block text-sm font-medium text-gray-700",children:s}),(0,r.jsx)("select",{id:x,className:(0,a.cn)("w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",t&&"border-red-500 focus:ring-red-500",c),...d,children:n.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),t&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:t}),l&&!t&&(0,r.jsx)("p",{className:"text-sm text-gray-500",children:l})]})}},200:function(e,s,t){"use strict";t.d(s,{RM:function(){return c},SC:function(){return i},iA:function(){return l},pj:function(){return x},ss:function(){return d},xD:function(){return n}});var r=t(7437);t(2265);var a=t(2169);let l=e=>{let{children:s,className:t,...l}=e;return(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsx)("table",{className:(0,a.cn)("w-full border-collapse",t),...l,children:s})})},n=e=>{let{children:s,className:t,...l}=e;return(0,r.jsx)("thead",{className:(0,a.cn)("bg-gray-50",t),...l,children:s})},c=e=>{let{children:s,className:t,...l}=e;return(0,r.jsx)("tbody",{className:(0,a.cn)("bg-white divide-y divide-gray-200",t),...l,children:s})},i=e=>{let{children:s,className:t,...l}=e;return(0,r.jsx)("tr",{className:(0,a.cn)("hover:bg-gray-50 transition-colors",t),...l,children:s})},d=e=>{let{children:s,className:t,...l}=e;return(0,r.jsx)("th",{className:(0,a.cn)("px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",t),...l,children:s})},x=e=>{let{children:s,className:t,...l}=e;return(0,r.jsx)("td",{className:(0,a.cn)("px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b border-gray-200",t),...l,children:s})}}},function(e){e.O(0,[358,651,396,462,865,971,938,744],function(){return e(e.s=1070)}),_N_E=e.O()}]);