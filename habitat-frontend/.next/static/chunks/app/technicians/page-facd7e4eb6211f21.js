(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[24],{6141:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},9617:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9883:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1827:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1138:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},820:function(e,t,s){Promise.resolve().then(s.bind(s,6639))},6639:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(7437),i=s(2265),n=s(3779),c=s(3414),l=s(7418),r=s(6651),d=s(2278),o=s(4706),x=s(8584),u=s(492),h=s(200),m=s(1633),j=s(9883),y=s(1827),p=s(9031);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,s(2898).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);var v=s(6141),g=s(9617),b=s(1138),N=s(2169),w=s(5925);function k(){let{hasPermission:e}=(0,n.useAuth)(),[t,s]=(0,i.useState)([]),[k,C]=(0,i.useState)(!0),[z,A]=(0,i.useState)(""),[Z,S]=(0,i.useState)(!1),[E,M]=(0,i.useState)(!1),[T,q]=(0,i.useState)(null),[L,I]=(0,i.useState)({name:"",contact:"",specializations:[],availability:""}),[_,P]=(0,i.useState)("");(0,i.useEffect)(()=>{e("technicians:read")&&D()},[]);let D=async()=>{try{C(!0);let e=await m.E.getTechnicians();s(e)}catch(e){w.default.error("Failed to fetch technicians")}finally{C(!1)}},F=async e=>{e.preventDefault();try{await m.E.createTechnician(L),w.default.success("Technician created successfully"),S(!1),H(),D()}catch(e){w.default.error("Failed to create technician")}},O=async e=>{if(e.preventDefault(),T)try{await m.E.updateTechnician(T._id,L),w.default.success("Technician updated successfully"),M(!1),q(null),H(),D()}catch(e){w.default.error("Failed to update technician")}},Y=async e=>{if(confirm("Are you sure you want to delete this technician?"))try{await m.E.deleteTechnician(e),w.default.success("Technician deleted successfully"),D()}catch(e){w.default.error("Failed to delete technician")}},H=()=>{I({name:"",contact:"",specializations:[],availability:""}),P("")},K=e=>{q(e),I({name:e.name,contact:e.contact,specializations:e.specializations,availability:e.availability}),M(!0)},R=()=>{_.trim()&&(I(e=>({...e,specializations:[...e.specializations,_.trim()]})),P(""))},V=e=>{I(t=>({...t,specializations:t.specializations.filter((t,s)=>s!==e)}))},U=(t||[]).filter(e=>e.name.toLowerCase().includes(z.toLowerCase())||e.contact.toLowerCase().includes(z.toLowerCase())||e.specializations.some(e=>e.toLowerCase().includes(z.toLowerCase())));return e("technicians:read")?(0,a.jsxs)(c.A,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Technicians"}),e("technicians:write")&&(0,a.jsxs)(r.z,{onClick:()=>S(!0),children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"Add Technician"]})]}),(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(y.Z,{className:"w-4 h-4 text-gray-400"})}),(0,a.jsx)(d.I,{placeholder:"Search technicians...",value:z,onChange:e=>A(e.target.value),className:"pl-10"})]})})}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{children:["All Technicians (",U.length,")"]})}),(0,a.jsx)(l.aY,{children:k?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"})}):(0,a.jsxs)(h.iA,{children:[(0,a.jsx)(h.xD,{children:(0,a.jsxs)(h.SC,{children:[(0,a.jsx)(h.ss,{children:"Name"}),(0,a.jsx)(h.ss,{children:"Contact"}),(0,a.jsx)(h.ss,{children:"Specializations"}),(0,a.jsx)(h.ss,{children:"Availability"}),(0,a.jsx)(h.ss,{children:"Status"}),(0,a.jsx)(h.ss,{children:"Actions"})]})}),(0,a.jsx)(h.RM,{children:U.map(t=>(0,a.jsxs)(h.SC,{children:[(0,a.jsx)(h.pj,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(p.Z,{className:"w-4 h-4 text-primary-700"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:t.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Added: ",(0,N.p6)(t.createdAt)]})]})]})}),(0,a.jsx)(h.pj,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(f,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:t.contact})]})}),(0,a.jsx)(h.pj,{children:(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:t.specializations.map((e,t)=>(0,a.jsx)(x.C,{variant:"info",className:"text-xs",children:e},t))})}),(0,a.jsx)(h.pj,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:t.availability})]})}),(0,a.jsx)(h.pj,{children:(0,a.jsx)(x.C,{variant:t.isActive?"success":"default",children:t.isActive?"Active":"Inactive"})}),(0,a.jsx)(h.pj,{children:e("technicians:write")&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>K(t),children:(0,a.jsx)(g.Z,{className:"w-4 h-4"})}),(0,a.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>Y(t._id),className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(b.Z,{className:"w-4 h-4"})})]})})]},t._id))})]})})]}),0===U.length&&!k&&(0,a.jsx)(l.Zb,{children:(0,a.jsxs)(l.aY,{className:"p-12 text-center",children:[(0,a.jsx)(p.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No technicians found"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Add your first technician to get started."})]})})]}),(0,a.jsx)(u.u,{isOpen:Z,onClose:()=>S(!1),title:"Add New Technician",size:"lg",children:(0,a.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,a.jsx)(d.I,{label:"Name",value:L.name,onChange:e=>I(t=>({...t,name:e.target.value})),placeholder:"Enter technician name",required:!0}),(0,a.jsx)(d.I,{label:"Contact",value:L.contact,onChange:e=>I(t=>({...t,contact:e.target.value})),placeholder:"Enter contact number or email",required:!0}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Specializations"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(d.I,{value:_,onChange:e=>P(e.target.value),placeholder:"Enter specialization",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),R())}),(0,a.jsx)(r.z,{type:"button",onClick:R,variant:"outline",children:"Add"})]}),L.specializations.length>0&&(0,a.jsx)("div",{className:"space-y-1",children:L.specializations.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e}),(0,a.jsx)(r.z,{type:"button",variant:"outline",size:"sm",onClick:()=>V(t),className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(b.Z,{className:"w-3 h-3"})})]},t))})]}),(0,a.jsx)(o.g,{label:"Availability",value:L.availability,onChange:e=>I(t=>({...t,availability:e.target.value})),placeholder:"e.g., Monday-Friday 9AM-6PM, Weekends 10AM-4PM",rows:3,required:!0}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(r.z,{type:"button",variant:"outline",onClick:()=>S(!1),children:"Cancel"}),(0,a.jsx)(r.z,{type:"submit",children:"Create Technician"})]})]})}),(0,a.jsx)(u.u,{isOpen:E,onClose:()=>M(!1),title:"Edit Technician",size:"lg",children:(0,a.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,a.jsx)(d.I,{label:"Name",value:L.name,onChange:e=>I(t=>({...t,name:e.target.value})),required:!0}),(0,a.jsx)(d.I,{label:"Contact",value:L.contact,onChange:e=>I(t=>({...t,contact:e.target.value})),required:!0}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Specializations"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(d.I,{value:_,onChange:e=>P(e.target.value),placeholder:"Enter specialization",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),R())}),(0,a.jsx)(r.z,{type:"button",onClick:R,variant:"outline",children:"Add"})]}),L.specializations.length>0&&(0,a.jsx)("div",{className:"space-y-1",children:L.specializations.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e}),(0,a.jsx)(r.z,{type:"button",variant:"outline",size:"sm",onClick:()=>V(t),className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(b.Z,{className:"w-3 h-3"})})]},t))})]}),(0,a.jsx)(o.g,{label:"Availability",value:L.availability,onChange:e=>I(t=>({...t,availability:e.target.value})),rows:3,required:!0}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(r.z,{type:"button",variant:"outline",onClick:()=>M(!1),children:"Cancel"}),(0,a.jsx)(r.z,{type:"submit",children:"Update Technician"})]})]})})]}):(0,a.jsx)(c.A,{children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You don't have permission to view this page."})]})})}},2278:function(e,t,s){"use strict";s.d(t,{I:function(){return n}});var a=s(7437);s(2265);var i=s(2169);let n=e=>{let{label:t,error:s,helperText:n,className:c,id:l,...r}=e,d=l||"input-".concat(Math.random().toString(36).substr(2,9));return(0,a.jsxs)("div",{className:"space-y-2",children:[t&&(0,a.jsx)("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700",children:t}),(0,a.jsx)("input",{id:d,className:(0,i.cn)("w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",s&&"border-red-500 focus:ring-red-500",c),...r}),s&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:s}),n&&!s&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:n})]})}},492:function(e,t,s){"use strict";s.d(t,{u:function(){return l}});var a=s(7437),i=s(2265),n=s(2169),c=s(2549);let l=e=>{let{isOpen:t,onClose:s,title:l,children:r,size:d="md"}=e;return((0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,s]),t)?(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),(0,a.jsxs)("div",{className:(0,n.cn)("relative bg-white rounded-lg shadow-xl w-full",{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[d]),children:[l&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:l}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(c.Z,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{className:"p-6",children:r})]})]})}):null}},200:function(e,t,s){"use strict";s.d(t,{RM:function(){return l},SC:function(){return r},iA:function(){return n},pj:function(){return o},ss:function(){return d},xD:function(){return c}});var a=s(7437);s(2265);var i=s(2169);let n=e=>{let{children:t,className:s,...n}=e;return(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsx)("table",{className:(0,i.cn)("w-full border-collapse",s),...n,children:t})})},c=e=>{let{children:t,className:s,...n}=e;return(0,a.jsx)("thead",{className:(0,i.cn)("bg-gray-50",s),...n,children:t})},l=e=>{let{children:t,className:s,...n}=e;return(0,a.jsx)("tbody",{className:(0,i.cn)("bg-white divide-y divide-gray-200",s),...n,children:t})},r=e=>{let{children:t,className:s,...n}=e;return(0,a.jsx)("tr",{className:(0,i.cn)("hover:bg-gray-50 transition-colors",s),...n,children:t})},d=e=>{let{children:t,className:s,...n}=e;return(0,a.jsx)("th",{className:(0,i.cn)("px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",s),...n,children:t})},o=e=>{let{children:t,className:s,...n}=e;return(0,a.jsx)("td",{className:(0,i.cn)("px-4 py-4 whitespace-nowrap text-sm text-gray-900 border-b border-gray-200",s),...n,children:t})}},4706:function(e,t,s){"use strict";s.d(t,{g:function(){return n}});var a=s(7437);s(2265);var i=s(2169);let n=e=>{let{label:t,error:s,helperText:n,className:c,id:l,...r}=e,d=l||"textarea-".concat(Math.random().toString(36).substr(2,9));return(0,a.jsxs)("div",{className:"space-y-2",children:[t&&(0,a.jsx)("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700",children:t}),(0,a.jsx)("textarea",{id:d,className:(0,i.cn)("w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-vertical",s&&"border-red-500 focus:ring-red-500",c),...r}),s&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:s}),n&&!s&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:n})]})}}},function(e){e.O(0,[358,651,396,462,865,971,938,744],function(){return e(e.s=820)}),_N_E=e.O()}]);